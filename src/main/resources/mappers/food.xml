<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="FoodDAO">
	<!-- 메뉴 리스트 -->
	<select id="getMenuList" resultType="com.team.smart.app.vo.FoodMenuVO">
		SELECT * FROM food_menu_tbl
	</select>
	
	<!-- 스토어 리스트 -->
	<select id="getFoodStoreList" parameterType="String" resultType="com.team.smart.app.vo.FoodStoreVO">
		SELECT uc.comp_org
		      ,uc.comp_section
		      ,uc.comp_hp
		      ,c.f_seq
		      ,c.comp_seq
		      ,c.long_desc
		      ,c.short_desc
		      ,c.f_mainimg
		      ,c.f_category
		FROM food_company_tbl c
		INNER JOIN user_company_tbl uc ON(uc.comp_seq = c.comp_seq)
		INNER JOIN (SELECT comp_seq, count(*) f_cnt FROM food_menu_tbl group by comp_seq) m
		   ON(m.comp_seq = c.comp_seq)
		WHERE f_cnt > 0
	    <if test="value != null">
			AND c.f_category = #{value}
		</if> 
	</select>
	
</mapper>